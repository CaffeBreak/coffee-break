generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

model Player {
  id           String  @id
  name         String
  isDead       Boolean @default(false)
  ownedRoom    Room?   @relation("owner")
  joinedRoom   Room?   @relation("joinedPlayers", fields: [joinedRoomId], references: [id])
  joinedRoomId String?
}

model Room {
  id       String    @id
  password String    @unique
  owner    Player    @relation("owner", fields: [ownerId], references: [id])
  ownerId  String    @unique
  players  Player[]  @relation("joinedPlayers")
  state    RoomState @default(WAITING) // 部屋の状態 現在のフェーズとか
}

enum RoomState {
  WAITING // 参加者待ち
  USING // カード行使
  DISCUSSION // 議論
  VOTING // 投票中
  FINISHING // ゲーム終了後
}
